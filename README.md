# ğŸ“ ChatGLM2 IELTS Fine-tuning Project

![Python](https://img.shields.io/badge/Python-3.8%2B-blue)
![ChatGLM2](https://img.shields.io/badge/Model-ChatGLM2--6B-green)
![Method](https://img.shields.io/badge/FineTuning-P--Tuning%20v2%20%2F%20LoRA-yellow)
![Status](https://img.shields.io/badge/Status-Experimental-orange)

åŸºäº ChatGLM2-6B å¾®è°ƒçš„é›…æ€ï¼ˆIELTSï¼‰å¤‡è€ƒåŠ©æ‰‹ã€‚æœ¬é¡¹ç›®æ—¨åœ¨æ¢ç´¢å¤§è¯­è¨€æ¨¡å‹åœ¨å‚ç›´æ•™è‚²é¢†åŸŸçš„åº”ç”¨æ½œåŠ›ï¼Œä¸“æ³¨äºæä¾›æ›´ç¬¦åˆé›…æ€è¯„åˆ†æ ‡å‡†çš„å†™ä½œæ‰¹æ”¹ä¸å£è¯­æ¨¡æ‹Ÿã€‚

## ğŸ“– é¡¹ç›®ç®€ä»‹ (Introduction)

æœ¬é¡¹ç›®é€šè¿‡å‚æ•°é«˜æ•ˆå¾®è°ƒï¼ˆPEFTï¼‰æŠ€æœ¯ï¼Œå°†é€šç”¨å¤§æ¨¡å‹ ChatGLM2 é€‚é…åˆ°é›…æ€å¤‡è€ƒåœºæ™¯ã€‚è§£å†³äº†é€šç”¨æ¨¡å‹åœ¨ç‰¹å®šè€ƒè¯•è§„åˆ™ä¸‹â€œè¯„åˆ†ä¸å‡†â€ã€â€œé£æ ¼ä¸ç¬¦â€çš„é—®é¢˜ï¼Œæ—¨åœ¨æ‰“é€ ä¸€ä¸ªä½æˆæœ¬ã€æœ¬åœ°åŒ–ã€é«˜éšç§çš„ AI é›…æ€é™ªç»ƒã€‚

## ğŸ¯ ç›®æ ‡ç”¨æˆ· (Target Audience)

* **é›…æ€å¤‡è€ƒå­¦ç”Ÿ**ï¼šéœ€è¦é«˜è´¨é‡ã€å³æ—¶çš„å£è¯­é™ªç»ƒå’Œä½œæ–‡æ‰¹æ”¹ï¼Œä½†é¢„ç®—æœ‰é™æˆ–å¸Œæœ›ä¿æŠ¤éšç§ï¼ˆå¦‚å£è¯­å½•éŸ³ä¸ä¸Šä¼ äº‘ç«¯ï¼‰çš„è€ƒç”Ÿã€‚
* **NLP å¼€å‘è€…/ç ”ç©¶è€…**ï¼šæ¢ç´¢åœ¨æ¶ˆè´¹çº§æ˜¾å¡ä¸Šè¿›è¡Œå‚ç›´é¢†åŸŸ LLM å¾®è°ƒä¸è½åœ°æµç¨‹çš„åŒè¡Œã€‚

## ğŸ’¡ å·¥ç¨‹å¤ç›˜ä¸æ ¸å¿ƒæ€è€ƒ (Engineering Insights)

> âš ï¸ **æ ¸å¿ƒä»·å€¼è¯´æ˜**ï¼šæœ¬éƒ¨åˆ†è®°å½•äº†é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­çš„æŠ€æœ¯å†³ç­–ã€é‡åˆ°çš„å›°éš¾åŠè§£å†³æ–¹æ¡ˆï¼Œå±•ç¤ºäº†ä» Demo åˆ°è½åœ°çš„å·¥ç¨‹æ€ç»´ã€‚

### 1. æ¨¡å‹æ•ˆæœè¯„ä¼° (Evaluation)
* **ç°çŠ¶**ï¼šåŸºåº§æ¨¡å‹å…·æœ‰ä¼˜ç§€çš„é€šç”¨å¯¹è¯èƒ½åŠ›ï¼Œä½†åœ¨é›…æ€â€œTask Responseâ€å’Œâ€œCoherenceâ€è¯„åˆ†ç»´åº¦ä¸Šè¾ƒä¸ºæ¨¡ç³Šã€‚
* **è¯„ä¼°æ–¹æ³•**ï¼š
    * **å®šæ€§è¯„ä¼°**ï¼šæ„å»ºåŒ…å« 1500 ç¯‡ä¸åŒåˆ†æ•°æ®µï¼ˆ5.0 - 8.0ï¼‰çš„çœŸé¢˜èŒƒæ–‡æµ‹è¯•é›†ï¼Œäººå·¥å¯¹æ¯”æ¨¡å‹è¯„åˆ†ä¸è€ƒå®˜çœŸå®è¯„åˆ†çš„å·®å¼‚ã€‚
    * **å®šé‡è¯„ä¼° (LLM-as-a-Judge)**ï¼šå¼•å…¥ Gemini ä½œä¸º Refereeï¼Œè®¡ç®—å¾®è°ƒåæ¨¡å‹è¾“å‡ºçš„è¯„è¯­ä¸æ ‡å‡†è¯„è¯­çš„è¯­ä¹‰ç›¸ä¼¼åº¦ï¼Œä»¥åŠæ‰“åˆ†è¯¯å·®ç‡ï¼ˆMSEï¼‰ã€‚

### 2. æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ (Challenges & Solutions)

| æŒ‘æˆ˜åˆ†ç±» | å…·ä½“ç—›ç‚¹ | è§£å†³æ–¹æ¡ˆ |
| :--- | :--- | :--- |
| **ç®—åŠ›ç“¶é¢ˆ** | åªæœ‰æ¶ˆè´¹çº§æ˜¾å¡ï¼ˆå¦‚ RTX 30/40ç³»åˆ—ï¼‰ï¼Œæ— æ³•è¿›è¡Œå…¨å‚æ•°å¾®è°ƒã€‚ | é‡‡ç”¨ **INT4 é‡åŒ–** åŠ è½½æ¨¡å‹ï¼Œé…åˆ **P-Tuning v2** æˆ– **LoRA** æŠ€æœ¯ï¼Œå°†æ˜¾å­˜éœ€æ±‚æ§åˆ¶åœ¨ 6GB-10GB ä¹‹é—´ã€‚ |
| **æ•°æ®è´¨é‡** | å¼€æºé›…æ€æ•°æ®æ‚ä¹±ï¼Œå¤§é‡èŒƒæ–‡ç¼ºä¹å‡†ç¡®çš„åˆ†æ•°æ ‡æ³¨ï¼Œä¸”æ ¼å¼ä¸ç»Ÿä¸€ã€‚ | å¼€å‘æ•°æ®æ¸…æ´—è„šæœ¬ï¼ˆæ­£åˆ™å»å™ªï¼‰ï¼›åˆ©ç”¨ GPT-4 ç”Ÿæˆé«˜è´¨é‡çš„â€œåˆæˆæ•°æ®â€ä½œä¸ºå¾®è°ƒçš„ Seed Dataï¼Œæ„å»ºæ ‡å‡† JSONL æ ¼å¼ã€‚ |
| **å¹»è§‰é—®é¢˜** | æ¨¡å‹å¶å°”ä¼šæé€ ä¸å­˜åœ¨çš„é›…æ€è¯„åˆ†ç»†åˆ™ï¼Œæˆ–åœ¨å£è¯­æ¨¡æ‹Ÿä¸­è‡ªè¡Œç»“æŸè¯é¢˜ã€‚ | åœ¨ Prompt ä¸­å¼•å…¥ **CoT (æ€ç»´é“¾)** å¼•å¯¼ï¼›åœ¨å¾®è°ƒæ•°æ®ä¸­å¼ºåŒ–â€œåŸºäºè§„åˆ™å¼•ç”¨â€çš„å›ç­”æ¨¡å¼ï¼›é€šè¿‡ System Prompt å¼ºåˆ¶çº¦æŸè§’è‰²è¾¹ç•Œã€‚ |

### 3. æŠ€æœ¯è·¯çº¿æ¢è®¨ï¼šå¾®è°ƒæ˜¯æœ€ä¼˜è§£å—ï¼Ÿ
**ç»“è®º**ï¼šä»…é å¾®è°ƒï¼ˆSFTï¼‰ä¸æ˜¯æœ€ä¼˜è§£ï¼Œå®ƒæ›´å¤šæ˜¯è°ƒæ•´æ¨¡å‹çš„â€œè¯´è¯è¯­æ°”â€è€Œéâ€œæ³¨å…¥çŸ¥è¯†â€ã€‚

* **å½“å‰æ–¹æ¡ˆ**ï¼šChatGLM2 + LoRA å¾®è°ƒã€‚
* **å­˜åœ¨å±€é™**ï¼šæ¨¡å‹å¯¹äºæœ€æ–°çš„é›…æ€é¢˜åº“ï¼ˆå¦‚å½“å­£å£è¯­é¢˜å¡ï¼‰ç¼ºä¹å®æ—¶çŸ¥è¯†ï¼Œä¸”é•¿é€»è¾‘æ¨ç†èƒ½åŠ›åœ¨å‚æ•°é‡é™åˆ¶ä¸‹æœ‰å¤©èŠ±æ¿ã€‚
* **æ”¹è¿›æ–¹å‘ (Next Step)**ï¼š
    * **RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ)**ï¼šå¤–æŒ‚ã€Šå‰‘æ¡¥é›…æ€ã€‹çœŸé¢˜åº“å’Œè¯„åˆ†æ ‡å‡†æ–‡æ¡£ï¼Œè§£å†³çŸ¥è¯†æ—¶æ•ˆæ€§å’Œå‡†ç¡®æ€§é—®é¢˜ã€‚
    * **RLHF (äººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ )**ï¼šæ„å»º Reward Modelï¼ŒåŸºäºçœŸå®è€ƒç”Ÿçš„åå¥½ï¼ˆç‚¹èµ/ä¿®æ”¹å»ºè®®ï¼‰è¿›è¡Œå¯¹é½è®­ç»ƒï¼Œä½¿æ¨¡å‹åé¦ˆæ›´åƒçœŸå®è€ƒå®˜ã€‚

### 4. äº§å“åŒ–éš¾ç‚¹åˆ†æ (Production Bottlenecks)
è‹¥å°†æœ¬é¡¹ç›®è½¬åŒ–ä¸ºé•¿æœŸå¯ç”¨çš„å•†ä¸š/å¼€æºäº§å“ï¼Œé¢ä¸´ä»¥ä¸‹æ ¸å¿ƒéš¾ç‚¹ï¼š
1.  **æ¨ç†å»¶è¿Ÿä¸æˆæœ¬**ï¼šå£è¯­é™ªç»ƒå¯¹å»¶è¿Ÿæåº¦æ•æ„Ÿã€‚æœ¬åœ°éƒ¨ç½²ç”¨æˆ·é—¨æ§›é«˜ï¼Œäº‘ç«¯éƒ¨ç½² GPU æˆæœ¬é«˜æ˜‚ï¼ˆToken ç»æµæ¨¡å‹éœ€ä¼˜åŒ–ï¼‰ã€‚
2.  **è¯­éŸ³äº¤äº’é“¾è·¯**ï¼šç›®å‰çš„ STT (Whisper) -> LLM -> TTS é“¾è·¯ä¸­ï¼Œè¯­éŸ³è½¬æ–‡å­—çš„å‡†ç¡®ç‡å—å£éŸ³å½±å“å¤§ï¼Œä¸”å…¨é“¾è·¯å»¶è¿Ÿéš¾ä»¥æ§åˆ¶åœ¨ 500ms ä»¥å†…ï¼ˆè¿™æ˜¯æµç•…å¯¹è¯çš„é˜ˆå€¼ï¼‰ã€‚
3.  **é•¿ä¸Šä¸‹æ–‡è®°å¿†**ï¼šé›…æ€å£è¯­ Part 3 éœ€è¦ç»“åˆ Part 1/2 çš„å†…å®¹ï¼Œé•¿çª—å£ä¸‹çš„è®°å¿†ä¸¢å¤±ä¼šå¯¼è‡´ä½“éªŒä¸‹é™ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1. ç¯å¢ƒå‡†å¤‡
```bash
git clone [https://github.com/richardoo-707/ChatGLM2-IELTS-Finetune.git](https://github.com/richardoo-707/ChatGLM2-IELTS-Finetune.git)
cd ChatGLM2-IELTS-Finetune
pip install -r requirements.txt